# Cloudflare Pages configuration
name = "jessicathings-com"
compatibility_date = "2024-07-08"

[build]
command = "pnpm run build"
cwd = "."

# Environment variables for build
[env.production.vars]
NODE_VERSION = "18"

# Functions configuration for OAuth endpoints
[env.production]
compatibility_flags = ["nodejs_compat"]

# Custom domains (update with your actual domain)
# [env.production]
# custom_domain = "jessicathings.com"

# Redirects for SEO (optional)
[[redirects]]
from = "/blog/*"
to = "/:splat"
status = 301

# Headers for better performance
[[headers]]
for = "/*"
[headers.values]
  X-Frame-Options = "DENY"
  X-Content-Type-Options = "nosniff"
  Referrer-Policy = "strict-origin-when-cross-origin"

[[headers]]
for = "*.js"
[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.css"
[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.woff2"
[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"
